<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">

<!--
  - Root application context definition for a web app that uses JDBC.
  -
  - Does not depend on web infrastructure or any web-specific classes!
  - Assumes running in a J2EE environment in the "dataSource" definition, as
  - it looks for a "java:comp/env/jdbc/myds" JNDI DataSource, but that can be
  - replaced easily (as noted). Such a context definition can thus be reused
  - in test environments or standalone applications without any hassle.
  -->
  
	<beans>		

	<!-- ========================= GENERAL DEFINITIONS ========================= -->

	<!--
	  - The message source for this context, loaded from localized "messages_xx" files
	  - in the classpath, i.e. "/WEB-INF/classes/messages.properties" or
	  - "/WEB-INF/classes/messages_fr.properties".
	  -
	  - "getMessage" calls to this context will use this source.
	  - Child contexts can have their own message sources, inheriting all messages from this
	  - source, being able to define new messages and override ones defined in this source.
	  -->
	<bean id="messageSource" class="com.interface21.context.support.ResourceBundleMessageSource">	
		<property name="basename"><value>messages</value></property>										
	</bean>

	<bean id="localeResolver" class="com.interface21.web.servlet.i18n.CookieLocaleResolver"/>

	<bean id="themeResolver" class="com.interface21.web.servlet.theme.CookieThemeResolver"/>

	<!-- ===========================================================-->
	<!-- Interceptors												-->
	<!-- ===========================================================-->
	<bean id="localeChangeInterceptor" 
		class="com.interface21.web.servlet.i18n.LocaleChangeInterceptor"/>
	<bean id="themeChangeInterceptor" 
		class="com.interface21.web.servlet.theme.ThemeChangeInterceptor"/>


	<!-- ========================= Start of PERSISTENCE DEFINITIONS ========================= -->
  
	<!-- ========================= In memory version ========================= -->

	<bean id="daoCountry" class="com.interface21.samples.countries.dao.DaoCountryMem"
		singleton="true"/>

	<!-- ========================= Database version ========================= -->

<!--
	<bean id="daoCountry" class="com.interface21.samples.countries.dao.DaoCountryJdbc"
		singleton="true"/>

-->
	<!-- MYSQL DataSource for J2EE environments. -->
<!--
	<bean id="dataSource" class="com.interface21.jndi.JndiObjectFactoryBean">
		<property name="jndiName"><value>jdbc/sirene-ds</value></property>
	</bean>
-->
	<!-- MYSQL Incrementing key generator -->
<!--
	<bean id="incrementer" singleton="true" class="com.interface21.jdbc.core.support.MySQLMaxValueIncrementer" >
		<property name="dataSource"><ref bean="dataSource"/></property>
		<property name="incrementerName"><value>si3_ids</value></property>
		<property name="columnName"><value>nextval</value></property>
	</bean>
-->

	<!-- ========================= End of PERSISTENCE DEFINITIONS ========================= -->
	
</beans>
